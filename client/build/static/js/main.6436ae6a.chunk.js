(this["webpackJsonpnim-portal"]=this["webpackJsonpnim-portal"]||[]).push([[0],{79:function(e,n,t){},86:function(e,n,t){"use strict";t.r(n);var a,c,r,i,s,o,l,d=t(1),j=t.n(d),b=t(67),u=t.n(b),m=(t(79),t(27)),h=t(18),O=t(6),p=t(71),x=t(97),f=t(99),g=t(96),v=t(68),w=t(28),y=t(29),N=t(58),k=new(function(){function e(){Object(w.a)(this,e)}return Object(y.a)(e,[{key:"getProfile",value:function(){return Object(N.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(N.a)(e).exp<Date.now()/1e3}catch(n){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),C=t(2),S=function(){return Object(C.jsx)("header",{className:"bg-secondary mb-4 py-2 flex-row align-center",children:Object(C.jsxs)("div",{className:"container flex-row justify-space-between-lg justify-center align-center",children:[Object(C.jsx)(h.b,{to:"/",children:Object(C.jsx)("h1",{children:"NIM Portal"})}),Object(C.jsx)("nav",{className:"text-center",children:k.loggedIn()?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(h.b,{to:"/about",children:"About Us"}),Object(C.jsx)(h.b,{to:"/profile",children:"Me"}),Object(C.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),k.logout()},children:"Logout"})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(h.b,{to:"/about",children:"About Us"}),Object(C.jsx)(h.b,{to:"/login",children:"Login"}),Object(C.jsx)(h.b,{to:"/signup",children:"Signup"})]})})]})})},_=function(){return Object(C.jsxs)("footer",{className:"w-100 mt-auto bg-secondary p-4",children:[Object(C.jsx)("div",{className:"container",children:"\xa92022 by NIM Portal"}),Object(C.jsxs)("div",{className:"container",children:["Contact Us at ",Object(C.jsx)("a",{class:"footer-link",href:"mailto:support@nimportal.com",children:"support@nimportal.com"})," or by phone at ",Object(C.jsx)("a",{class:"footer-link",href:"tel:3365555555",children:"336-555-5555."})]})]})},A=t(9),$=t(17),T=t(13),I=t(10),P=t(93),W=t(30),U=t(98),L=Object(U.a)(a||(a=Object(W.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),B=Object(U.a)(c||(c=Object(W.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),R=function(e){var n=Object(d.useState)({email:"",password:""}),t=Object(I.a)(n,2),a=t[0],c=t[1],r=Object(P.a)(L),i=Object(I.a)(r,2),s=i[0],o=i[1].error,l=function(e){var n=e.target,t=n.name,r=n.value;c(Object(m.a)(Object(m.a)({},a),{},Object(T.a)({},t,r)))},j=function(){var e=Object($.a)(Object(A.a)().mark((function e(n){var t,r;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,s({variables:Object(m.a)({},a)});case 4:t=e.sent,r=t.data,k.login(r.login.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:c({email:"",password:""});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();return Object(C.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(C.jsx)("div",{className:"col-12 col-md-6",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsx)("h4",{className:"card-header",children:"Login"}),Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsxs)("form",{onSubmit:j,children:[Object(C.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:a.email,onChange:l}),Object(C.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:a.password,onChange:l}),Object(C.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]}),o&&Object(C.jsx)("div",{children:"Login failed"})]})]})})})},z=function(){return Object(C.jsxs)("div",{class:"no-match",children:["Oops, we couldn't find that page.",Object(C.jsx)("div",{class:"oops",children:Object(C.jsx)("img",{src:"https://64.media.tumblr.com/95833a0b7ad4df467399e04b72954bc0/797b50d1451b8db2-d0/s540x810/c87ec086a073bacb72cae459890434330c9c4534.gifv",alt:"wall-e sad face"})})]})},D=t(101),M=Object(U.a)(r||(r=Object(W.a)(["\n  query comments($username: String) {\n    comments(username: $username) {\n      _id\n      commentText\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n        createdAt\n        username\n        reactionBody\n      }\n    }\n  }\n"]))),E=Object(U.a)(i||(i=Object(W.a)(["\n  query comment($id: ID!) {\n    comment(_id: $id) {\n      _id\n      commentText\n      createdAt\n      username\n      reactionCount\n      reactions {\n        _id\n        createdAt\n        username\n        reactionBody\n      }\n    }\n  }\n"]))),Y=Object(U.a)(s||(s=Object(W.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n      friendCount\n      friends {\n        _id\n        username\n      }\n      comments {\n        _id\n        commentText\n        createdAt\n        reactionCount\n      }\n    }\n  }\n"]))),q=Object(U.a)(o||(o=Object(W.a)(["\n  {\n    me {\n      _id\n      username\n      email\n      friendCount\n      comments {\n        _id\n        commentText\n        createdAt\n        reactionCount\n        reactions {\n          _id\n          createdAt\n          reactionBody\n          username\n        }\n      }\n      friends {\n        _id\n        username\n      }\n    }\n  }\n"]))),G=Object(U.a)(l||(l=Object(W.a)(["\n  {\n    me {\n      _id\n      username\n      email\n      friendCount\n      friends {\n        _id\n        username\n      }\n    }\n  }\n"]))),H=function(e){var n=e.reactions;return Object(C.jsxs)("div",{className:"card mb-3",children:[Object(C.jsx)("div",{className:"card-header",children:Object(C.jsx)("span",{className:"text-light",children:"Reactions"})}),Object(C.jsx)("div",{className:"card-body",children:n&&n.map((function(e){return Object(C.jsxs)("p",{className:"pill mb-3",children:[e.reactionBody," ","// ",Object(C.jsxs)(h.b,{to:"/profile/".concat(e.username),style:{fontWeight:700},children:[e.username," on ",e.createdAt]})]},e._id)}))})]})},F=function(e){var n=Object(O.o)().id,t=Object(D.a)(E,{variables:{id:n}}),a=t.loading,c=t.data,r=(null===c||void 0===c?void 0:c.comment)||{};return a?Object(C.jsx)("div",{children:"Loading..."}):Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"card mb-3",children:[Object(C.jsxs)("p",{className:"card-header",children:[Object(C.jsx)("span",{style:{fontWeight:700},className:"text-light",children:r.username})," ","comment on ",r.createdAt]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsx)("p",{children:r.commentText})})]}),r.reactionCount>0&&Object(C.jsx)(H,{reactions:r.reactions})]})},J=function(e){var n=e.comments,t=e.title;return n.length?Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:t}),n&&n.map((function(e){return Object(C.jsxs)("div",{className:"card mb-3",children:[Object(C.jsxs)("p",{className:"card-header",children:[Object(C.jsx)(h.b,{to:"/profile/".concat(e.username),style:{fontWeight:700},className:"text-light",children:e.username})," "," ","comment on ",e.createdAt]}),Object(C.jsx)("div",{className:"card-body",children:Object(C.jsxs)(h.b,{to:"/comment/".concat(e._id),children:[Object(C.jsx)("p",{children:e.commentText}),Object(C.jsxs)("p",{className:"mb-0",children:["Reactions: ",e.reactionCount," || Click to"," ",e.reactionCount?"see":"start"," the discussion!"]})]})})]},e._id)}))]}):Object(C.jsx)("h3",{children:"No Comments Yet"})},V=function(e){var n=e.friendCount,t=e.username,a=e.friends;return a&&a.length?Object(C.jsxs)("div",{children:[Object(C.jsxs)("h5",{children:[t,"'s ",n," ",1===n?"friend":"friends"]}),a.map((function(e){return Object(C.jsx)("button",{className:"btn w-100 display-block mb-2",children:Object(C.jsx)(h.b,{to:"/profile/".concat(e.username),children:e.username})},e._id)}))]}):Object(C.jsxs)("p",{className:"bg-dark text-light p-3",children:[t,", meet others involved with this nonprofit!"]})},K=function(e){var n=Object(O.o)().username,t=Object(D.a)(n?Y:q,{variables:{username:n}}),a=t.loading,c=t.data,r=(null===c||void 0===c?void 0:c.me)||(null===c||void 0===c?void 0:c.user)||{};return k.loggedIn()&&k.getProfile().data.username===n?Object(C.jsx)(O.a,{to:"/profile"}):a?Object(C.jsx)("div",{children:"Loading..."}):null!==r&&void 0!==r&&r.username?Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"flex-row mb-3",children:Object(C.jsxs)("h2",{className:"bg-dark text-secondary p-3 display-inline-block",children:["Viewing ",n?"".concat(r.username,"'s"):"your"," profile."]})}),Object(C.jsxs)("div",{className:"flex-row justify-space-between mb-3",children:[Object(C.jsx)("div",{className:"col-12 mb-3 col-lg-8",children:Object(C.jsx)(J,{comments:r.comments,title:"".concat(r.username,"'s comments...")})}),Object(C.jsx)("div",{className:"col-12 col-lg-3 mb-3",children:Object(C.jsx)(V,{username:r.username,friendCount:r.friendCount,friends:r.friends})})]})]}):Object(C.jsx)("h4",{children:"You need to be logged in to see this. Use the navigation links above to sign up or log in!"})},Q=function(){var e=Object(d.useState)({username:"",email:"",password:""}),n=Object(I.a)(e,2),t=n[0],a=n[1],c=Object(P.a)(B),r=Object(I.a)(c,2),i=r[0],s=r[1].error,o=function(e){var n=e.target,c=n.name,r=n.value;a(Object(m.a)(Object(m.a)({},t),{},Object(T.a)({},c,r)))},l=function(){var e=Object($.a)(Object(A.a)().mark((function e(n){var a,c;return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,i({variables:Object(m.a)({},t)});case 4:a=e.sent,c=a.data,k.login(c.addUser.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();return Object(C.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(C.jsx)("div",{className:"col-12 col-md-6",children:Object(C.jsxs)("div",{className:"card",children:[Object(C.jsx)("h4",{className:"card-header",children:"Sign Up"}),Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsxs)("form",{onSubmit:l,children:[Object(C.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"username",id:"username",value:t.username,onChange:o}),Object(C.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:t.email,onChange:o}),Object(C.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:t.password,onChange:o}),Object(C.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]}),s&&Object(C.jsx)("div",{children:"Signup failed"})]})]})})})},X=function(){return Object(C.jsxs)("div",{className:"text-dark",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"Our Purpose"}),Object(C.jsx)("p",{children:"Here at the Nonprofit Interactive Messaging Portal, or the NIM Portal, we want to help users with communications and donations with nonprofit organizations."})]}),Object(C.jsx)("h1",{children:"Our Story"}),Object(C.jsx)("p",{children:"Our creators realize that nonprofit organizations are paying large amounts of money to have interactive portals that allow them to communicate with their donors and future donors. This site will bridge the gap between donors and account managers of nonprofit organizations."}),Object(C.jsx)("h1",{children:"How It All Works"}),Object(C.jsx)("p",{children:"Donors are able to communicate about upcoming pledges, update their contact information and even make a donation all from one place. Account managers will have a running record of all communication, with any particular donor, eliminating the need to create contact reports in their database."})]})},Z=t(55),ee=function(){return Object(C.jsx)(Z.a,{borderColour:"#b66d35",borderWidth:"5px",borderRadius:"15px",borderType:"solid",innerPadding:"30px",topPosition:.05,topOffset:"22px",topGap:"4px",rightPosition:.1,rightOffset:"22px",rightGap:"4px",children:Object(C.jsx)(X,{})})},ne=function(){var e=Object(D.a)(M),n=e.loading,t=e.data,a=Object(D.a)(G).data,c=(null===t||void 0===t?void 0:t.comments)||[];console.log(c);var r=k.loggedIn();return Object(C.jsx)("main",{children:Object(C.jsxs)("div",{className:"flex-row justify-space-between",children:[Object(C.jsx)("div",{className:"col-12 mb-3 ".concat(r&&"col-lg-8"),children:n?Object(C.jsx)("div",{children:"Loading..."}):Object(C.jsx)("div",{children:r?Object(C.jsx)(J,{comments:c,title:"See What's Happening in Our Organization"}):Object(C.jsx)(Z.a,{borderColour:"#b66d35",borderWidth:"5px",borderRadius:"15px",borderType:"solid",innerPadding:"30px",topPosition:.05,topOffset:"22px",topGap:"4px",rightPosition:.1,rightOffset:"22px",rightGap:"4px",children:Object(C.jsx)(X,{})})})}),r&&a?Object(C.jsx)("div",{className:"col-12 col-lg-3 mb-3",children:Object(C.jsx)(V,{username:a.me.username,friendCount:a.me.friendCount,friends:a.me.friends})}):null]})})},te=Object(p.a)({uri:"/graphql"}),ae=Object(v.a)((function(e,n){var t=n.headers,a=localStorage.getItem("id_token");return{headers:Object(m.a)(Object(m.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),ce=new x.a({link:ae.concat(te),cache:new f.a});var re=function(){return Object(C.jsx)(g.a,{client:ce,children:Object(C.jsx)(h.a,{children:Object(C.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(C.jsx)(S,{}),Object(C.jsx)("div",{className:"container",children:Object(C.jsxs)(O.d,{children:[Object(C.jsx)(O.b,{path:"/",element:Object(C.jsx)(ne,{})}),Object(C.jsx)(O.b,{path:"/about",element:Object(C.jsx)(ee,{})}),Object(C.jsx)(O.b,{path:"/login",element:Object(C.jsx)(R,{})}),Object(C.jsx)(O.b,{path:"/signup",element:Object(C.jsx)(Q,{})}),Object(C.jsxs)(O.b,{path:"/profile",children:[Object(C.jsx)(O.b,{path:":username",element:Object(C.jsx)(K,{})}),Object(C.jsx)(O.b,{path:"",element:Object(C.jsx)(K,{})})]}),Object(C.jsx)(O.b,{path:"/comment:id",element:Object(C.jsx)(F,{})}),Object(C.jsx)(O.b,{path:"*",element:Object(C.jsx)(z,{})})]})}),Object(C.jsx)(_,{})]})})})},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}u.a.render(Object(C.jsx)(j.a.StrictMode,{children:Object(C.jsx)(re,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");ie?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):se(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):se(n,e)}))}}()}},[[86,1,2]]]);
//# sourceMappingURL=main.6436ae6a.chunk.js.map